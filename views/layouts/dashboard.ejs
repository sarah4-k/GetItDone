<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/PageStyle.css">
</head>

<body>
<%- include('../partials/nav_dashboard') %> 

<div class="container my-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Your Tasks</h2>
    <a href="/task/add" class="btn rounded-circle add-task-btn" title="Add Task">+</a>
  </div>

  <!-- Task list -->
  <ul class="mt-4">
    <% tasks.forEach(task => { %>
    <li class="mb-3">
      <strong><%= task.title %></strong>
      — <%= task.category %> — <%= task.priority === 1 ? "High" :
      task.priority === 2 ? "Medium" : "Low" %> — due: <%= task.dueDate ?
      task.dueDate.toDateString() : "No date" %>

      <form
        method="POST"
        action="/task/<%= task._id %>/delete"
        style="display: inline"
      >
        <button type="submit" class="btn btn-danger btn-sm ms-2">Delete</button>
      </form>
      <a href="/task/<%= task._id %>/edit" class="btn btn-warning btn-sm ms-2">Edit</a>
    </li>
    <% }) %>
  </ul>
</div>


<%- include('../partials/footer') %> 
</body>
</html>
